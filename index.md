<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>小周同学 &#8211; 保持思考</title>
<meta name='robots' content='max-image-preview:large' />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="小周同学" />
<meta name="application-name" content="小周同学" />
<meta property="og:title" content="笔记" />
<meta property="og:site_name" content="小周同学" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xiaozhou.com/" />
<meta property="twitter:card" content="summary_large_image" />
<link rel='dns-prefetch' href='//cdn.staticfile.org' />
<link rel='dns-prefetch' href='//www.waistu.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel='stylesheet' id='dashicons-css'  href='https://www.waistu.com/wp-includes/css/dashicons.min.css?ver=5.9.3' type='text/css' media='all' />
<link rel='stylesheet' id='wp-block-library-css'  href='https://www.waistu.com/wp-includes/css/dist/block-library/style.min.css?ver=5.9.3' type='text/css' media='all' />
<style id='wp-block-library-theme-inline-css' type='text/css'>
.wp-block-audio figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-audio figcaption{color:hsla(0,0%,100%,.65)}.wp-block-code>code{font-family:Menlo,Consolas,monaco,monospace;color:#1e1e1e;padding:.8em 1em;border:1px solid #ddd;border-radius:4px}.wp-block-embed figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-embed figcaption{color:hsla(0,0%,100%,.65)}.blocks-gallery-caption{color:#555;font-size:13px;text-align:center}.is-dark-theme .blocks-gallery-caption{color:hsla(0,0%,100%,.65)}.wp-block-image figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-image figcaption{color:hsla(0,0%,100%,.65)}.wp-block-pullquote{border-top:4px solid;border-bottom:4px solid;margin-bottom:1.75em;color:currentColor}.wp-block-pullquote__citation,.wp-block-pullquote cite,.wp-block-pullquote footer{color:currentColor;text-transform:uppercase;font-size:.8125em;font-style:normal}.wp-block-quote{border-left:.25em solid;margin:0 0 1.75em;padding-left:1em}.wp-block-quote cite,.wp-block-quote footer{color:currentColor;font-size:.8125em;position:relative;font-style:normal}.wp-block-quote.has-text-align-right{border-left:none;border-right:.25em solid;padding-left:0;padding-right:1em}.wp-block-quote.has-text-align-center{border:none;padding-left:0}.wp-block-quote.is-large,.wp-block-quote.is-style-large,.wp-block-quote.is-style-plain{border:none}.wp-block-search .wp-block-search__label{font-weight:700}.wp-block-group:where(.has-background){padding:1.25em 2.375em}.wp-block-separator{border:none;border-bottom:2px solid;margin-left:auto;margin-right:auto;opacity:.4}.wp-block-separator:not(.is-style-wide):not(.is-style-dots){width:100px}.wp-block-separator.has-background:not(.is-style-dots){border-bottom:none;height:1px}.wp-block-separator.has-background:not(.is-style-wide):not(.is-style-dots){height:2px}.wp-block-table thead{border-bottom:3px solid}.wp-block-table tfoot{border-top:3px solid}.wp-block-table td,.wp-block-table th{padding:.5em;border:1px solid;word-break:normal}.wp-block-table figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-table figcaption{color:hsla(0,0%,100%,.65)}.wp-block-video figcaption{color:#555;font-size:13px;text-align:center}.is-dark-theme .wp-block-video figcaption{color:hsla(0,0%,100%,.65)}.wp-block-template-part.has-background{padding:1.25em 2.375em;margin-top:0;margin-bottom:0}
</style>
<link rel='stylesheet' id='caomei-css'  href='https://www.waistu.com/wp-content/themes/Wing-preview/static/caomei/style.css?ver=1.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='style-css'  href='https://www.waistu.com/wp-content/themes/Wing-preview/style.css?ver=1.0.1' type='text/css' media='all' />
<style id='global-styles-inline-css' type='text/css'>
body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--duotone--dark-grayscale: url('#wp-duotone-dark-grayscale');--wp--preset--duotone--grayscale: url('#wp-duotone-grayscale');--wp--preset--duotone--purple-yellow: url('#wp-duotone-purple-yellow');--wp--preset--duotone--blue-red: url('#wp-duotone-blue-red');--wp--preset--duotone--midnight: url('#wp-duotone-midnight');--wp--preset--duotone--magenta-yellow: url('#wp-duotone-magenta-yellow');--wp--preset--duotone--purple-green: url('#wp-duotone-purple-green');--wp--preset--duotone--blue-orange: url('#wp-duotone-blue-orange');--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
</style>
<link rel='stylesheet' id='parent-css'  href='https://www.waistu.com/wp-content/themes/Wing-preview/style.css?ver=5.9.3' type='text/css' media='all' />
<script type='text/javascript' src='https://www.waistu.com/wp-content/themes/Wing-preview/static/helper.js?ver=1.0.1' id='helper-js'></script>
<link rel="https://api.w.org/" href="https://www.waistu.com/wp-json/" /><link rel="alternate" type="application/json" href="https://www.waistu.com/wp-json/wp/v2/pages/1479" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.waistu.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.waistu.com/wp-includes/wlwmanifest.xml" /> 
<link rel="canonical" href="https://www.waistu.com/" />
<link rel='shortlink' href='https://www.waistu.com/' />
<!-- HFCM by 99 Robots - Snippet # 1: 01首页 -->
<style type="text/css">
    .icon {
       width: 1em; height: 1em;
       vertical-align: -0.15em;
       fill: currentColor;
       overflow: hidden;
    }
</style>
<script src="//at.alicdn.com/t/font_2836660_noyhrawz2g.js"></script>
<!-- /end HFCM by 99 Robots -->
		<script>
			document.documentElement.className = document.documentElement.className.replace( 'no-js', 'js' );
		</script>
				<style>
			.no-js img.lazyload { display: none; }
			figure.wp-block-image img.lazyloading { min-width: 150px; }
							.lazyload, .lazyloading { opacity: 0; }
				.lazyloaded {
					opacity: 1;
					transition: opacity 400ms;
					transition-delay: 0ms;
				}
					</style>
		<!-- Analytics by WP-Statistics v13.2.3 - https://wp-statistics.com/ -->
<script>var WP_Statistics_http = new XMLHttpRequest();WP_Statistics_http.open('GET', 'https://www.waistu.com/wp-json/wp-statistics/v2/hit?_=1652779786&_wpnonce=4581af398b&wp_statistics_hit_rest=yes&browser=Edge&platform=OS X&version=101.0.1210.47&referred=https%3A%2F%2Fwww.waistu.com&ip=103.45.78.111&exclusion_match=no&exclusion_reason&ua=Mozilla%2F5.0+%28Macintosh%3B+Intel+Mac+OS+X+10_15_7%29+AppleWebKit%2F537.36+%28KHTML%2C+like+Gecko%29+Chrome%2F101.0.4951.64+Safari%2F537.36+Edg%2F101.0.1210.47&track_all=1&timestamp=1652808586&current_page_type=home&current_page_id=1479&search_query&page_uri=/&user_id=0', true);WP_Statistics_http.setRequestHeader("Content-Type", "application/json;charset=UTF-8");WP_Statistics_http.send(null);</script>
<link rel="icon" href="https://www.waistu.com/wp-content/uploads/2022/05/cropped-未标题-1-32x32.png" sizes="32x32" />
<link rel="icon" href="https://www.waistu.com/wp-content/uploads/2022/05/cropped-未标题-1-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="https://www.waistu.com/wp-content/uploads/2022/05/cropped-未标题-1-180x180.png" />
<meta name="msapplication-TileImage" content="https://www.waistu.com/wp-content/uploads/2022/05/cropped-未标题-1-270x270.png" />
</head>

<body class="auto">
<div id="app" :class="['layout', animation]" style="display: none;" v-show="true">
    <header id="header" class="flex-center justify-between">
        <hgroup class="logo">
            <h1 class="fullname">
                <a href="https://xiaozhou.com">小周同学</a>
            </h1>
        </hgroup>
        <section class="header__right d-flex">
            <form method="get" action="https://www.waistu.com" class="search mr-2">
                <input class="search-key s-circle" name="s" placeholder="输入关键词..." type="text" required="required"/>
                <i class="text-small czs-search-l flex-center"></i>
            </form>
            <div class="dropdown" hover-show perspective>
                <a class="right-btn dropdown-toggle flex-center s-circle" href="javascript:void(0);" tabindex="0">
                    <i class="czs-clothes-l text-small"></i>
                </a>
                <ul class="menu menu-left mode-switch uni-card bg-blur" @click="toggleSkinMode">
                    <li v-for="item of modeList" class="menu-item">
                        <a class="flex-center" :data-mode="item.mode" href="javascript:void(0);">
                            <i :class="[item.icon, 'mr-1']"></i>{{ item.name }}
                        </a>
                    </li>
                </ul>
            </div>
            <a class="right-btn menu-btn off-canvas-toggle flex-center ml-2" href="#aside">
                <i class="czs-menu-l"></i>
            </a>
        </section>
    </header>
    <section id="core" class="container off-canvas off-canvas-sidebar-show">
        <!-- Aside -->
        <aside id="aside" class="off-canvas-sidebar">
            <section class="sticky">
				<ul class="header-nav reset-ul uni-bg uni-shadow header_nav"><li id="menu-item-1722" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-home current-menu-item page_item page-item-1479 current_page_item menu-item-1722"><a href="https://www.waistu.com/" aria-current="page"><svg class="icon" aria-hidden="true"> <use xlink:href="#icon-zhuye2"></use> </svg>    博客首页</a></li>
<li id="menu-item-1723" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1723"><a href="https://www.waistu.com/archives/category/code"><svg class="icon" aria-hidden="true"> <use xlink:href="#icon-daima1"></use> </svg>  三行代码</a></li>
<li id="menu-item-1725" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1725"><a href="https://www.waistu.com/archives/category/operation"><svg class="icon" aria-hidden="true"> <use xlink:href="#icon-_biji"></use> </svg>  运营笔记</a></li>
<li id="menu-item-1727" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1727"><a href="https://www.waistu.com/archives/category/life"><svg class="icon" aria-hidden="true"> <use xlink:href="#icon-camera"></use> </svg>  生活随笔</a></li>
<li id="menu-item-1724" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1724"><a href="https://www.waistu.com/archives/category/misc"><svg class="icon" aria-hidden="true"> <use xlink:href="#icon-wenjianjia"></use> </svg>  杂项归档</a></li>
</ul><ul class="header-nav reset-ul uni-bg uni-shadow footer_nav"><li id="menu-item-1732" class="menu-item menu-item-type-post_type menu-item-object-post menu-item-1732"><a href="https://www.waistu.com/archives/1323"><svg class="icon" aria-hidden="true"> <use xlink:href="#icon-kele"></use> </svg>  关于博主</a></li>
<li id="menu-item-1728" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1728"><a href="https://www.waistu.com/friend-link"><svg class="icon" aria-hidden="true"> <use xlink:href="#icon-wangzhan"></use></svg>  友情链接</a></li>
<li id="menu-item-1726" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1726"><a href="https://www.waistu.com/archives"><svg class="icon" aria-hidden="true"> <use xlink:href="#icon-wenjianjia1"></use> </svg>  文章归档</a></li>
<li id="menu-item-1729" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1729"><a href="https://www.waistu.com/list"><svg class="icon" aria-hidden="true"> <use xlink:href="#icon-renzheng"></use> </svg> 榜上有名</a></li>
</ul><div class="widget_text reset-ul uni-bg uni-shadow flex-center widget_custom_html"><div class="textwidget custom-html-widget"><a href="https://weibo.com/u/6200817910" target="_blank" style="text-decoration: none; color:#66758c; font-size:  28px;" rel="noopener">
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-weibo1"></use>
            </svg>
        </a>&nbsp;&nbsp;
        <a href="https://space.bilibili.com/162097530" target="_blank" style="text-decoration: none; color:#66758c;font-size: 28px;" rel="noopener">
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-bilibili1"></use>
            </svg>
        </a>&nbsp;&nbsp;
        <a href="https://github.com/Road09" target="_blank" style="text-decoration: none; color:#66758c;font-size:  28px;" rel="noopener">
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-github"></use>
            </svg>
        </a>&nbsp;&nbsp;
        <a href="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzU0MTEwMTQxOQ==&scene=124#wechat_redirect" target="_blank" style="text-decoration: none; color:#66758c;font-size: 28px;" title="微信公众号：二歪同学" rel="noopener">
            <svg class="icon" aria-hidden="true">
                <use xlink:href="#icon-weixingongzhonghao"></use>
            </svg>
        </a>
</div></div>            </section>
        </aside>
        <a class="off-canvas-overlay" href="#close"></a>
        <!-- Main -->
        <main id="main" class="uni-bg uni-shadow off-canvas-content">
            <div class="content">    <div id="notes"></div>
    <script>
        (() => {
            const $config = {
                // 登录状态
                logged: false,
                permalink: "https:\/\/www.waistu.com\/",
                // 时间格式化
                lately: true,
                editor: {
                    placeholder: '在想什么，记下来吧？',
                    features: ['topic', 'emoji', 'ul', 'ol', 'bold', 'italic', 'image']
                },
                search: { type: 'all', topics: '', },
                tabs: [{ name: '全部', id: 'all' }, { name: '笔记', id: 'note' }, { name: '文章', id: 'post' }],
                paging: { page: 1, rows: 10, total: 0 },
                // 评论配置
                comment: {
                    editor: {
                        placeholder: 'Comment',
                        features: ['emoji', 'bold', 'italic'],
                    },
                    hyperlinks: true,
                    pagination: {
                        rows: 10,
                        rolling: true,
                        autoload: true,
                    },
                    visitor: [],
                    author: {"display_name":"\u4e8c\u6b6a\u540c\u5b66","description":"","avatar":"https://cravatar.cn/avatar/4c96565920a72043bb4e33670459bfed?s=96&d=identicon&r=g"},
                }
            };
            $h.store.config = $config;

            $h.tasks.notes = () => $h.store.notes = new Vue({
                el: '#notes',
                components: {
                    HeatMap: $modules.HeatMap,
                    TopicList: $modules.TopicList,
                    NoteCard: $modules.NoteCard,
                    Editor: $modules.Editor
                },
                template: `
                    <div id="notes" class="d-flex">
                        <main class="notes-core">
                            <editor v-if="logged" class="mb-2" ref="editor" @submit="submitNote" v-bind="editor">
                                <a slot="send-l" href="javascript:void(0);" class="btn-private btn btn-link btn-action btn-sm flex-center mr-2"
                                    :class="{ active: private }" @click="private = !private">
                                    <i class="dashicons dashicons-privacy"></i>
                                </a>
                            </editor>

                            <div class="notes-tabbar sticky bg-blur">
                                <ul class="tab">
                                    <li v-for="item in superTabs" :key="item.id" @click="handleTabs(item)" :class="['tab-item', { active: search.type === item.id }]">
                                        <a href="javascript: void(0);">{{ item.name }}</a>
                                    </li>
                                    <div v-if="loading" class="loading"></div>
                                    <span v-else-if="search.topics" class="chip text-primary">
                                        {{ search.topics }}
                                        <a href="javascript: void(0);" class="btn btn-clear" @click="handleTopic('')" aria-label="Close" role="button"></a>
                                    </span>
                                </ul>
                            </div>
                            <div class="notes-list" :style="{opacity:loading?0.5:1}">
                                <note-card v-for="(note, index) in noteList" :key="note.id" v-bind="{ logged, lately, note }" @event="data => handleNoteCard(data, note, index)" @topic="handleTopic" />
                                <div v-if="paging.total && !loading && theEnd" class="text-center" style="opacity: 0.5;">没有更多了</div>
                            </div>
                        </main>
                        <aside class="notes-aside">
                            <section class="sticky">
                                <heat-map />
                                <topic-list :active="search.topics" @topic="handleTopic" />
                            </section>
                        </aside>
                    </div>
                `,
                data() {
                    return {
                        loading: false,// 加载状态
                        private: false,// 私密笔记
                        form: {
                            content: "",
                            status: "publish", // 发布状态
                            comment_status: "open", // 允许评论
                            ping_status: "open", // 允许ping
                        },
                        noteList: [],
                        ...$config
                    };
                },
                computed: {
                    superTabs() {
                        const tabs = [];
                        if ( this.logged ) {
                            tabs.push(...[{ name: '回顾', id: 'review' }, { name: '私密', id: 'private' }]);
                        }
                        return [...$config.tabs, ...tabs];
                    },
                    theEnd() {
                        return this.noteList.length >= this.paging.total;
                    },
                },
                watch: {
                    private(val) {
                        this.form.status = val ? 'private' : 'publish';
                        this.$toast({
                            type: (this.private ? 'primary' : ''),
                            message: '私密笔记已' + (this.private ? '开启' : '关闭')
                        });
                    },
                    'search.type': function (val) {
                        this.reset();
                        this.getNoteList(false);
                    }
                },
                created() {
                    this.getNoteList(false);
                },
                methods: {
                    reset() {
                        this.search.topics = '';
                        this.paging.page = 1;
                    },
                    handleTopic(topic) {
                        this.reset();
                        this.search.topics = topic;
                        this.getNoteList(false);
                    },
                    handleNoteCard({ event }, note, index) {
                        switch (event) {
                            case 'quote':
                                $h.scrollTo({
                                    callback: () => {
                                        this.$refs.editor.insertText(['', note.type, note.id].join('/'));
                                    }
                                });
                                break;
                            case 'edit':
                                // 编辑
                                break;
                            case 'delete':
                                this.noteList.splice(index, 1);
                                break;
                        }
                    },
                    handleTabs(item) {
                        this.search.type = item.id;
                        // 滚动到顶部
                        $h.scrollTo();
                    },
                    // 加载下一页
                    handleNextPage() {
                        // 加载完毕、每日回顾不需要加载下一页
                        if ( this.loading || this.theEnd || this.search.type === 'review' ) return;
                        this.paging.page++;
                        this.getNoteList();
                    },
                    getNoteList(append = true) {
                        if ( this.loading ) return;
                        this.loading = true;
                        $h.ajax({
                            query: { action: 'get_all_posts', ...this.search, ...this.paging, },
                        })
                        .then(({ data, total }) => {
                            if ( append ) this.noteList.push(...data);
                            else this.noteList = data;
                            this.paging.total = total;
                        })
                        .finally(() => {
                            this.loading = false;
                        });
                    },
                    submitNote({ content, images }) {
                        // 从content提取topic：#topic1 #topic2 ...
                        const topics = (content.match(/#([^#|^<]+)/g) || []).map(item => item.replace('#', '')).filter(item => !!item);
                        const fields = [];
                        if ( (images || []).length ) {
                            fields.push({ name: 'images', value: images.map(item => item.id).join(',') });
                        }
                        this.$refs.editor.setLoading(true);
                        $h.rest('wp/v2/notes', {
                            method: 'POST',
                            query: { _locale: 'user' },
                            data: { ...this.form, content, topics, fields },
                        })
                        .then(() => {
                            this.$refs.editor.clear();
                            this.reset();
                            if ( ['all', 'note'].includes(this.search.type) || (this.private && this.search.type === 'private') ) {
                                this.getNoteList(false);
                            }
                        })
                        .finally(() => {
                            this.$refs.editor.setLoading(false);
                        });
                    }
                },
            });
        })();
    </script>
</div><!-- content -->
</main><!-- main -->
</section><!-- core -->

<footer id="footer">
    <div class="d-flex flex-center justify-between">
        <div class='left'>
            <span>&copy; 2022 <a
                        href="https://www.waistu.com">二歪同学</a></span>
			                <span> . <a href="https://beian.miit.gov.cn/" target="_blank">鲁ICP备2021036422号-2</a></span><br/>
				 <span>本站由 <a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank"><img
                 alt=""
                style="height: 28px;  vertical-align: middle;" data-src="https://images.imnian.com/imgs/2022/05/15/88c799026f3ce9bb.png" class="lazyload" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="><noscript><img
                src="https://images.imnian.com/imgs/2022/05/15/88c799026f3ce9bb.png" alt=""
                style="height: 28px;  vertical-align: middle;"></noscript></a>
        提供CDN加速/云存储服务</span>
			        </div>
        <div class='right'>
            <span>Theme by <a class="theme-name" href="https://biji.io" target="_blank">Wing</a></span>
        </div>
    </div>
</footer>

<script data-no-instant>
    function _exReload() {
		        window.Lately && Lately.init();
		        window.ViewImage && ViewImage.init('article img:not(.avatar)');
		        window.prettyPrint && prettyPrint();
		    }
</script>
</div>
<script type="text/javascript">/* <![CDATA[ */!function(e,n){var r={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":4,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":true,"textOverflow":"break","linenumbers":true,"theme":"dracula","language":"generic","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""},"resources":["https:\/\/www.waistu.com\/wp-content\/plugins\/enlighter\/cache\/enlighterjs.min.css?zISyDjzcjPN4SgV","https:\/\/www.waistu.com\/wp-content\/plugins\/enlighter\/resources\/enlighterjs\/enlighterjs.min.js"]},o=document.getElementsByTagName("head")[0],t=n&&(n.error||n.log)||function(){};e.EnlighterJSINIT=function(){!function(e,n){var r=0,l=null;function c(o){l=o,++r==e.length&&(!0,n(l))}e.forEach(function(e){switch(e.match(/\.([a-z]+)(?:[#?].*)?$/)[1]){case"js":var n=document.createElement("script");n.onload=function(){c(null)},n.onerror=c,n.src=e,n.async=!0,o.appendChild(n);break;case"css":var r=document.createElement("link");r.onload=function(){c(null)},r.onerror=c,r.rel="stylesheet",r.type="text/css",r.href=e,r.media="all",o.appendChild(r);break;default:t("Error: invalid file extension",e)}})}(r.resources,function(e){e?t("Error: failed to dynamically load EnlighterJS resources!",e):"undefined"!=typeof EnlighterJS?EnlighterJS.init(r.selectors.block,r.selectors.inline,r.options):t("Error: EnlighterJS resources not loaded yet!")})},(document.querySelector(r.selectors.block)||document.querySelector(r.selectors.inline))&&e.EnlighterJSINIT()}(window,console);!function(e){"undefined"!=typeof jQuery&&jQuery(document).on("ajaxComplete",function(){"undefined"!=typeof EnlighterJSINIT&&e.setTimeout(function(){EnlighterJSINIT.apply(e)},180)})}(window); /* ]]> */</script><script type='text/javascript' src='//cdn.staticfile.org/vue/2.6.14/vue.min.js?ver=1.0.1' id='vue-js'></script>
<script type='text/javascript' src='//cdn.staticfile.org/prettify/r298/prettify.js?ver=1.0.1' id='prettify-js'></script>
<script type='text/javascript' src='https://www.waistu.com/wp-content/themes/Wing-preview/static/package.js?ver=1.0.1' id='package-js'></script>
<script type='text/javascript' src='https://www.waistu.com/wp-content/themes/Wing-preview/static/modules.js?ver=1.0.1' id='modules-js'></script>
<script type='text/javascript' id='script-js-extra'>
/* <![CDATA[ */
var BaseData = {"origin":"https:\/\/www.waistu.com","avatar":"https:\/\/cravatar.cn\/","ajax":"https:\/\/www.waistu.com\/wp-admin\/admin-ajax.php","rest":"https:\/\/www.waistu.com\/wp-json\/","nonce":"4581af398b"};
/* ]]> */
</script>
<script type='text/javascript' src='https://www.waistu.com/wp-content/themes/Wing-preview/static/script.js?ver=1.0.1' id='script-js'></script>
<script type='text/javascript' src='https://www.waistu.com/wp-content/plugins/wp-smushit/app/assets/js/smush-lazy-load.min.js?ver=3.9.9' id='smush-lazy-load-js'></script>
<!--网站效率：0.102秒内查询了24次数据库-->
</body>

</html>
<!--
Performance optimized by W3 Total Cache. Learn more: https://www.boldgrid.com/w3-total-cache/

Object Caching 38/49 objects using disk
Page Caching using disk: enhanced 

Served from: waistu.com @ 2022-05-17 17:29:46 by W3 Total Cache
-->
